import{_ as x,r as i,d as M,A as S,c as f,a,t as p,F as _,e as A,w as C,v as I,o as F,n as L,f as k}from"./index-Dcpcl8Lb.js";const B={class:"global-farms-view"},V={class:"count"},z={class:"num"},D={class:"legend"},G={class:"timeline"},N={class:"year-label"},T={__name:"GlobalFarmsView",setup(E){const u=i(null),v=i(null),b=i(0),c=[2005,2017],o=i(c[0]),l=["rgba(156, 4, 24,0.8)","rgba(172, 15, 41,0.8)","rgba(187, 29, 54,0.8)","rgba(201, 44, 66,0.8)","rgba(213, 58, 75,0.8)","rgba(224, 75, 81,0.8)","rgba(233, 91, 86,0.8)","rgba(242, 108, 88,0.8)","rgba(249, 125, 90,0.8)","rgba(253, 143, 91,0.8)","rgba(255, 161, 94,0.8)","rgba(255, 178, 105,0.8)","rgba(255, 195, 136,0.8)"],m=[{label:"2017年",color:l[12]},{label:"2015年",color:l[10]},{label:"2013年",color:l[8]},{label:"2011年",color:l[6]},{label:"2009年",color:l[4]},{label:"2007年",color:l[2]},{label:"2005年",color:l[0]}],w={features:[{properties:{date:"2005-01-01"},geometry:{coordinates:[-7.3828125,8.059229627200192]}},{properties:{date:"2010-01-01"},geometry:{coordinates:[-3.3828125,5.059229627200192]}},{properties:{date:"2015-01-01"},geometry:{coordinates:[.3828125,2.059229627200192]}}]};return M(async()=>{try{const s=await S.load({key:"d2697917d978cf60cd3eb519c290c760",version:"2.0",plugins:["AMap.Scale","AMap.ToolBar","AMap.ControlBar"]});u.value=new s.Map("map",{zoom:2.4,showLabel:!1,viewMode:"3D",center:[-7.3828125,8.059229627200192],mapStyle:"amap://styles/dark"}),v.value=new Loca.Container({map:u.value});const e=new Loca.PointLayer({zIndex:10,opacity:1}),t=g=>{const n=w.features.filter(r=>parseInt(r.properties.date.split("-")[0])<=g);b.value=n.length;const d=new Loca.GeoJSONSource({data:{type:"FeatureCollection",features:n.map(r=>({type:"Feature",properties:r.properties,geometry:r.geometry}))}});e.setSource(d)};t(o.value),e.setStyle({unit:"px",size:10,color:(g,n)=>{const d=parseInt(n.properties.date.split("-")[0]),r=m.find(y=>d>=parseInt(y.label));return r?r.color:"#FF8C00"},borderWidth:1,borderColor:"#FFFAF0",opacity:.9}),v.value.add(e),setInterval(()=>{o.value<c[1]?o.value++:o.value=c[0],t(o.value)},2e3)}catch(s){console.error("Failed to load map:",s)}}),(s,e)=>(F(),f("div",B,[e[4]||(e[4]=a("div",{class:"demo-title"},[a("h1",null,"圆点—孔子学院：文化资产的分布及影响"),a("h3",null,"大小点表达孔子学院在各国的开设分布及影响，学院的开设数量随时间发生变化")],-1)),e[5]||(e[5]=a("div",{id:"map",class:"map-container"},null,-1)),e[6]||(e[6]=a("canvas",{id:"player"},null,-1)),a("div",V,[a("div",z,p(b.value),1),e[2]||(e[2]=a("div",{class:"txt"},"locations",-1))]),a("div",D,[e[3]||(e[3]=a("h4",null,"年份",-1)),a("ul",null,[(F(),f(_,null,A(m,t=>a("li",{key:t.label},[a("span",{style:L({backgroundColor:t.color}),class:"color-box"},null,4),k(" "+p(t.label),1)])),64))])]),a("div",G,[C(a("input",{type:"range",min:"2005",max:"2017","onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),onInput:e[1]||(e[1]=t=>s.updateSource(o.value))},null,544),[[I,o.value]]),a("div",N,p(o.value)+"年",1)])]))}},J=x(T,[["__scopeId","data-v-4a449626"]]);export{J as default};
