import{_ as F,r as g,d as M,A as T,g as L,c as y,a as f,t as S,h as C,o as v}from"./index-Dcpcl8Lb.js";const A={class:"loca-demo"},k={key:0,class:"loading-overlay"},B={class:"loading-text"},z={__name:"LocaDemo",setup(D){const m=g(!0),i=g("正在加载地图..."),s={asia:[{coordinates:[121.4737,31.2304],count:35,name:"上海示范农场"},{coordinates:[139.6917,35.6895],count:30,name:"东京智能农场"},{coordinates:[103.8198,1.3521],count:25,name:"新加坡生态园"},{coordinates:[77.209,28.6139],count:28,name:"新德里农业基地"},{coordinates:[114.1095,22.3964],count:26,name:"香港科技农场"}],europe:[{coordinates:[2.3522,48.8566],count:32,name:"巴黎现代农场"},{coordinates:[-.1276,51.5074],count:29,name:"伦敦智慧农场"},{coordinates:[13.405,52.52],count:27,name:"柏林生态基地"},{coordinates:[12.4964,41.9028],count:24,name:"罗马有机农场"},{coordinates:[4.9041,52.3676],count:23,name:"阿姆斯特丹温室"}],northAmerica:[{coordinates:[-74.0059,40.7128],count:34,name:"纽约科技农场"},{coordinates:[-118.2437,34.0522],count:31,name:"洛杉矶绿色基地"},{coordinates:[-79.3832,43.6532],count:28,name:"多伦多智能农场"},{coordinates:[-123.1207,49.2827],count:26,name:"温哥华生态园"},{coordinates:[-112.074,33.4484],count:25,name:"凤凰城沙漠农场"}],southAmerica:[{coordinates:[-46.6333,-23.5505],count:28,name:"巴西圣保罗农场"},{coordinates:[-58.3816,-34.6037],count:24,name:"阿根廷布宜诺斯艾利斯农场"},{coordinates:[-70.6483,-33.4489],count:20,name:"智利圣地亚哥农场"}],oceania:[{coordinates:[151.2093,-33.8688],count:32,name:"澳大利亚悉尼农场"},{coordinates:[174.7633,-36.8485],count:18,name:"新西兰奥克兰农场"}],africa:[{coordinates:[18.4241,-33.9249],count:22,name:"南非开普敦农场"},{coordinates:[36.8219,-1.2921],count:26,name:"肯尼亚内罗毕农场"},{coordinates:[-7.5898,33.5731],count:19,name:"摩洛哥卡萨布兰卡农场"}]},r=[...s.asia,...s.europe,...s.northAmerica,...s.southAmerica,...s.oceania,...s.africa].map(o=>({lnglat:o.coordinates,name:o.name,value:o.count}));let a=null,n=null;const h=()=>{const o=document.createElement("link");o.rel="preload",o.as="script",o.href="https://webapi.amap.com/maps?v=2.0&key=d2697917d978cf60cd3eb519c290c760",document.head.appendChild(o)};return M(async()=>{try{h(),i.value="正在加载地图资源...";const o=await T.load({key:"d2697917d978cf60cd3eb519c290c760",version:"2.0",plugins:["AMap.Scale","AMap.ToolBar"],Loca:{version:"2.0.0"}});i.value="正在初始化地图...",a=new o.Map("container",{zoom:2,center:[0,0],pitch:0,viewMode:"3D",mapStyle:"amap://styles/normal",features:["bg","building","point","road","water"],showLabel:!0});const t=new o.InfoWindow({isCustom:!0,autoMove:!0,offset:new o.Pixel(0,-30)});let l=null;a.on("mousemove",e=>{l&&clearTimeout(l);const u=e.lnglat.getLng().toFixed(6),_=e.lnglat.getLat().toFixed(6);t.setContent(`
        <div style="padding: 8px; background: rgba(0,0,0,0.6); color: #fff; border-radius: 4px;">
          <div>经度：${u}</div>
          <div>纬度：${_}</div>
        </div>
      `),t.open(a,e.lnglat),l=setTimeout(()=>{t.close()},2e3)}),a.on("mouseout",()=>{l&&clearTimeout(l),t.close()});const c=()=>{const e=document.querySelector(".amap-copyright"),u=document.querySelector(".amap-logo");e&&(e.style.display="none"),u&&(u.style.display="none")};c(),setTimeout(c,100),setTimeout(c,500),setTimeout(c,1e3),a.on("complete",()=>{c(),setTimeout(c,100)}),a.addControl(new o.Scale({position:"LT",offset:new o.Pixel(10,10)})),a.addControl(new o.ToolBar({position:"RB",offset:new o.Pixel(10,30)})),i.value="正在创建可视化图层...";const p=window.Loca;n=new p.Container({map:a,animate:!1});const d=new p.ScatterLayer({container:n,zIndex:10,opacity:1,visible:!0,zooms:[2,22],blend:"normal"}),w={type:"FeatureCollection",features:r.map(e=>({type:"Feature",properties:{name:e.name,value:e.value},geometry:{type:"Point",coordinates:e.lnglat}}))},b=new p.GeoJSONSource({data:w});d.setSource(b),d.setStyle({unit:"px",size:15,color:"#00FFFF",borderWidth:1,borderColor:"#ffffff",opacity:.8}),n.add(d),await new Promise(e=>{a.on("complete",e)});const x=new o.Bounds([Math.min(...r.map(e=>e.lnglat[0]))-10,Math.min(...r.map(e=>e.lnglat[1]))-10],[Math.max(...r.map(e=>e.lnglat[0]))+10,Math.max(...r.map(e=>e.lnglat[1]))+10]);a.setBounds(x),setTimeout(()=>{d.setStyle({unit:"px",size:[15,15],color:"#00FFFF",borderWidth:1,borderColor:"#ffffff",opacity:.8,animation:{enable:!0,duration:2e3,easing:"linear",size:[15,20]}}),n.animate.start(),m.value=!1},500)}catch(o){console.error("Failed to load map:",o),m.value=!1,i.value="地图加载失败，请刷新重试"}}),L(()=>{n&&(n.animate.stop(),n.destroy()),a&&a.destroy()}),(o,t)=>(v(),y("div",A,[t[1]||(t[1]=f("div",{id:"container"},null,-1)),m.value?(v(),y("div",k,[t[0]||(t[0]=f("div",{class:"loading-spinner"},null,-1)),f("div",B,S(i.value),1)])):C("",!0)]))}},W=F(z,[["__scopeId","data-v-24911e9a"]]);export{W as default};
